---
layout: post
title: ğŸ“˜ [Docker] Docker ì‹œì‘í•˜ê¸° & ëª…ë ¹ì–´ ì •ë¦¬
image:
  path: /assets/img/thumbnail/docker-thumbnail.jpg
categories:
  - dev
  - devops
related_posts:
  - _posts/dev/docker/2025-05-01-docker-001.md
description: "[Docker] Docker ì‹œì‘í•˜ê¸° & ëª…ë ¹ì–´ ì •ë¦¬"
published: true
date: 2025-05-01
tags:
  - docker
sitemap: true
---

# ğŸ“˜ [Docker] Docker ì‹œì‘í•˜ê¸° & ëª…ë ¹ì–´ ì •ë¦¬

## Docker desktop ë‹¤ìš´ë¡œë“œ
[Docker: Accelerated Container Application Development](https://www.docker.com/) ë„ì»¤ ì„¤ì¹˜

## WSL ì„¤ì¹˜
```null
$ wsl --install
```

- Windows 10/11 Professional / Education / Enterprise ì—ë””ì…˜
    - WSL2 ê¸°ë°˜ Docker Engine ì‚¬ìš© ê°€ëŠ¥
    - Hyper-V ê¸°ë°˜ Docker Engine ì‚¬ìš© ê°€ëŠ¥
- Windows 10/11 Home ì—ë””ì…˜
    - WSL2 ê¸°ë°˜ Docker Engine ì‚¬ìš© ê°€ëŠ¥

## WSL ë²„ì „ ê¸°ë³¸ê°’ì„ 2ë¡œ ë³€ê²½
```null
$ wsl --set-default-version 2
```


**WSL(Windows Subsystem for Linux)**Â : ìœˆë„ìš°ì˜ ê°€ìƒí™” ê¸°ëŠ¥ì„ ì‚¬ìš©í•´, ìœˆë„ìš°ì—ì„œ ë¦¬ëˆ…ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ë„êµ¬

WSLì€ ìœˆë„ìš°ì˜ ê°€ìƒí™” ê¸°ìˆ  Hyper-V ì•„í‚¤í…ì²˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•œë‹¤.

- **WSL 1**Â : ì‹¤ì œ Linux ì»¤ë„ ì—†ì´ ë™ì‘í•˜ê¸° ë•Œë¬¸ì—, ëª¨ë“  Linux ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì§€ì›í•˜ì§€ ì•ŠìŒ.
- **WSL 2**Â : VMì—ì„œ Linux ì»¤ë„ì„ ì‹¤í–‰í•´ ì™„ì „í•œ ì‹œìŠ¤í…œ í˜¸ì¶œ í˜¸í™˜ì„±ì„ ì œê³µ.

## Hyper-v í™œì„±í™” ë°©ë²•

Terminal appì„ ì‹¤í–‰ì‹œì¼œì„œ ì•„ë˜ ëª…ë ¹ì–´ ì‹¤í–‰
```
$ Enable-WindowsOptionalFeatureÂ -OnlineÂ -FeatureNameÂ Microsoft-Hyper-VÂ -All
```

ë˜ëŠ”

ì»¨íŠ¸ë¡¤ + s ëˆŒëŸ¬ì„œ windows ê¸°ëŠ¥ ì„ íƒ
Hyper-v ì²´í¬ë°•ìŠ¤ ì„ íƒ

## Hyper-V ë¹„í™œì„±í™” ë°©ë²•
```
// ë¹„í™œì„±í™”
$ bcdedit /set hypervisorlaunchtype off
// ì‚­ì œ
$ Disable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V-All
```

- í™œì„±í™”ì¤‘ì¸ì§€ í™•ì¸
```
$ bcdedit /enum
```


## React(vite) + docker í™˜ê²½ ì…‹íŒ…

#### react í”„ë¡œì íŠ¸ ìƒì„±
[[2025-04-01-react-002]] ì°¸ê³ 

#### í”„ë¡œì íŠ¸ í´ë” ë£¨íŠ¸ ê²½ë¡œì— Dockerfile ìƒì„±
```docker
# node ê¸°ë°˜ docker ì´ë¯¸ì§€ ìƒì„±
FROM node

# ê²½ë¡œ ì„¤ì •í•˜ê¸°
WORKDIR /app

# package.jsonì„ working ë””ë ‰í† ë¦¬ì— ë³µì‚¬í•œë‹¤. Â ./ì€ í˜„ì¬ ë””ë ‰í† ë¦¬ë¥¼ ì˜ë¯¸
COPY package.json .

# ì˜ì¡´ì„± ì„¤ì¹˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.
RUN npm install

# í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ íŒŒì¼ì„ ë„ì»¤ ì»¨í…Œì´ë„ˆì˜ working ë””ë ‰í† ë¦¬ì— ë³µì‚¬
COPY . .

# í™˜ê²½ë³€ìˆ˜ ì ìš©
# hot reloading : ì†ŒìŠ¤ ì½”ë“œë¥¼ ë³€ê²½í–ˆì„ ë•Œ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì§€ ì•Šê³  ë°”ë€ ì†ŒìŠ¤ ì½”ë“œë§Œ ë¹ ë¥´ê²Œ êµì²´í•´ ì¤€ë‹¤.
# ìœˆë„ìš° í™˜ê²½ì—ì„œ hot reloadingì ìš©ì´ ë˜ì§€ì•Šì„ë–„ CHOKIDAR_USEPOLLING=true
ENV CHOKIDAR_USEPOLLING=true

# í•´ë‹¹ í¬íŠ¸ ì™¸ë¶€ì— ë…¸ì¶œ
EXPOSE 5173

# npm run dev ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
CMD ["npm", "run", "dev"]
```

#### Docker ì´ë¯¸ì§€ ë¹Œë“œ
```
docker build -t <ì´ë¯¸ì§€ ì´ë¦„> <ê²½ë¡œ>
docker build -t test_image .
```

```
docker images
```
- ì´ë¯¸ì§€ê°€ ì˜ ë§Œë“¤ì–´ì¡ŒëŠ”ì§€ í™•ì¸

#### Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰
```
// docker run -d -p <host port>:<container port> --name <tag> <ì‚¬ìš©í•  ì´ë¯¸ì§€>
docker run -d -p 3000:5173 --name test_container test_image
```
- ì´ë¯¸ì§€ë¡œë¶€í„° ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±
- ë¡œì»¬ì´ë¯¸ì§€ê°€ ì—†ë‹¤ë©´ ì›ê²© ì €ì¥ì†Œ urlì„ ì§€ì •í•˜ë©´ ì›ê²©ì €ì¥ì†Œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
- -d ì˜µì…˜ì€ ë°±ê·¸ë¼ìš´ë“œì— ì‹¤í–‰
- -p ì˜µì…˜ì€ í˜¸ìŠ¤íŠ¸ í¬íŠ¸ì™€ ì»¨í…Œì´ë„ˆ í¬íŠ¸ë¥¼ ë°”ì¸ë”© í•œë‹¤. (í¬íŠ¸ í¬ì›Œë”© ì„¤ì •)
- viteí™˜ê²½ì—ì„œëŠ” ê¸°ë³¸port 5173ìœ¼ë¡œ ì„¤ì •ë˜ì–´ìˆê¸°ë•Œë¬¸ì— 3000:5173ìœ¼ë¡œ ì„¤ì •

```
docker: Error response from daemon: Ports are not available: exposing port TCP 0.0.0.0:3000 -> 127.0.0.1:0: listen tcp 0.0.0.0:3000: bind: An attempt was made to access a socket in a way forbidden by its access permissions.
```
- í•´ë‹¹ í¬íŠ¸ê°€ ì—‘ì„¸ìŠ¤ê°€ ë˜ì§€ ì•Šì•„ì„œ ì˜¤ë¥˜ê°€ ë°œìƒ í•  ê²½ìš°


```
netsh interface ipv4 show excludedportrange protocol=tcp
```
- cmdì°½ì— í¬íŠ¸ ì œì™¸ ë²”ìœ„ë¥¼ í™•ì¸ 3000í¬íŠ¸ê°€ ì œì™¸ ë²”ìœ„ì—  í¬í•¨ëœë‹¤ë©´

```
net stop winnat
```
- cmd ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰ ëª…ë ¹ì–´ ì‹¤í–‰

#### ERR_EMPTY_RESPONSE http://localhost:3000/ ì ‘ì†ì´ ì•ˆë˜ëŠ”ê²½ìš°
ë„ì»¤ ì»¨í…Œì´ë„ˆ í™˜ê²½ê³¼ í˜¸ìŠ¤íŠ¸ í™˜ê²½ì€ ë…ë¦½ì ì¸ í™˜ê²½ì„ ê°€ì§„ë‹¤.
ì¦‰ í˜¸ìŠ¤íŠ¸ í™˜ê²½ê³¼ ë„ì»¤ ì»¨í…Œì´ë„ˆ í™˜ê²½ì˜ localhostëŠ” ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì´ë‹¤.
ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ localhostì„ ì‚¬ìš©í•˜ì—¬ í˜¸ìŠ¤íŠ¸ í™˜ê²½ì— ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
ì„œë¡œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ê¸° ë–„ë¬¸ì— vite.config.jsì—ì„œ ì„œë²„ ì˜µì…˜ ì„¤ì •ì„ ì¶”ê°€í•´ì¤˜ì•¼ í•œë‹¤.
server  host 0.0.0.0 ì˜ë¯¸ëŠ” Â LANì™€ ê³µìš© ì£¼ì†Œë¥¼ í¬í•¨í•œ ëª¨ë“  ì£¼ì†Œë¥¼ ìˆ˜ì‹ í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

```js
vite.config.js
export default defineConfig({
  plugins: [react()],
  server: {
    host: "0.0.0.0",
    port: 5137
  },
});
```

#### .dockerignore ì‘ì„±
ë¹Œë“œì‹œ ë¶ˆí•„ìš”í•œ íŒŒì¼ ì œì™¸ .gitignoreì™€ ë™ì¼
Docker ì´ë¯¸ì§€ í¬ê¸°ë¥¼ ì¤„ì´ê³  ë¶ˆí•„ìš”í•œ íŒŒì¼ í¬í•¨ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.
```
# Docker ë‚´ë¶€ì—ì„œë„ ë¬´ì‹œ
docker-compose*.yml
Dockerfile
.dockerignore

# Node.js ì˜ì¡´ì„± í´ë”
node_modules
npm-debug.log
yarn-debug.log
yarn-error.log

# ë¹Œë“œ ê²°ê³¼ë¬¼
build
dist

# í™˜ê²½ ì„¤ì •
.env

# ìš´ì˜ì²´ì œë‚˜ IDE ê´€ë ¨
.DS_Store
# Git
.git
.gitignore
```
- `.env` íŒŒì¼ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ í¬í•¨í•˜ë¯€ë¡œ ì ˆëŒ€ í¬í•¨ë˜ë©´ ì•ˆëœë‹¤.
- `build` ë˜ëŠ” `dist`ëŠ” ê°œë°œìš© Dockerfileì—ì„  ë³´í†µ ì œì™¸, ìš´ì˜ìš© Dockerfileì—ì„  í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `node_modules`ëŠ” ë¡œì»¬ì—ì„  ê¼­ í•„ìš”í•˜ì§€ë§Œ ì»¨í…Œì´ë„ˆ ì•ˆì—ì„œëŠ” ë³´í†µ `npm install`ì„ ë‹¤ì‹œ í•˜ë¯€ë¡œ ì œì™¸í•´ì•¼ í•œë‹¤.

#### Docker Bind Mount & Volume
ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œ ì†ŒìŠ¤ ìˆ˜ì •ëœ ê²½ìš° ì»¨í…Œì´ë„ˆë¥¼ ì¢…ë£Œí•˜ê³  ì´ë¯¸ì§€ ë¹Œë“œ ë‹¤ì‹œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ìˆœìœ¼ë¡œ ë°˜ë³µí•´ì•¼ í•œë‹¤.
ë³€ê²½ëœ ì†ŒìŠ¤ë¥¼  ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ì¦‰ê°ì ìœ¼ë¡œ ë°˜ì˜í•˜ê¸° ìœ„í•´ ë¡œì»¬ í´ë”ì™€ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ í´ë”ë¥¼ ë§ˆìš´íŠ¸ í•˜ì—¬ ì—°ê²°ì‹œì¼œì•¼ í•œë‹¤.

```bash
docker run -v ${pwd}<ë¡œì»¬í´ë”ê²½ë¡œ>:<ì»¨í…Œì´ë„ˆí´ë”ê²½ë¡œ> -d -p <host port>:<container port> --name <tag> <ì‚¬ìš©í•  ì´ë¯¸ì§€>
docker run -v ${pwd}/src:/app/src:ro -d -p 3000:5173 --name test_container test_image
```
- ${pwd}ëŠ” í˜„ì¬ê²½ë¡œë¥¼ ì˜ë¯¸ `:ro` ì½ê¸°ì „ìš© ëª¨ë“œ(ì»¨í„°ì´ë„ˆ ë‚´ë¶€ì—ì„œ ì“°ê¸°x)
- í˜„ì¬ê²½ë¡œ/src í´ë”ì™€ test_container /app/src í´ë”ì™€ ë§ˆìš´íŠ¸
- -d ì˜µì…˜ì€ ë°±ê·¸ë¼ìš´ë“œì— ì‹¤í–‰
- -p ì˜µì…˜ì€ í˜¸ìŠ¤íŠ¸ í¬íŠ¸ì™€ ì»¨í…Œì´ë„ˆ í¬íŠ¸ë¥¼ ë°”ì¸ë”© í•œë‹¤. (í¬íŠ¸ í¬ì›Œë”© ì„¤ì •)
- ìœˆë„ìš° í™˜ê²½ì—ì„œ Hot reloadingë˜ì§€ ì•Šì„ê²½ìš° `CHOKIDAR_USEPOLLING=true` ì¶”ê°€

#### docker-compose.yml ì‘ì„± ë°©ë²•
`docker-compose.yml`ì€ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì •ì˜í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì„¤ì • íŒŒì¼ì…ë‹ˆë‹¤.
```yml
services:
  react-app:
    # Dockerfileì´ ìˆëŠ” ê²½ë¡œ ì§€ì •
    build:
      context: .
      dockerfile: Dockerfile
    # ì»¨í…Œì´ë„ˆ ì´ë¦„ ëª…ì‹œ
    container_name: "react_container"
    # ì‚¬ìš©í•  dockerì´ë¯¸ì§€ ì§€ì •
Â  Â  image: test
    # ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹œ ì‹¤í–‰í•  ëª…ë ¹ì–´
    # command:
    # í¬íŠ¸ í¬ì›Œë”© ì„¤ì •
    ports:
      - "3000:5137"
    restart: always
    # í˜¸ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ volume ë§ˆìš´íŠ¸
    volumes: 
	  - ./src:/app/src
    # -it ì˜µì…˜ì„ ìœ„í•´ ì‚¬ìš©ë¨ (í‘œì¤€ì…ì¶œë ¥)
    stdin_open: true
    tty: true
    # ì§ì ‘ í™˜ê²½ ë³€ìˆ˜ ëª…ì‹œ ê°€ëŠ¥
    environment:
      - CHOKIDAR_USEPOLLING=true
	#`.env` íŒŒì¼ì— ìˆëŠ” ë³€ìˆ˜ë“¤ ìë™ ë¡œë”©
	# env_file:

```

#### docker-compose ì‹¤í–‰ ëª…ë ¹ì–´
```
# ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±
docker compose up

# ì´ë¯¸ì§€ë¥¼ ìƒˆë¡œ ë¹Œë“œí•´ì„œ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±
docker compose -p <container name> up -d --build

# ì»¨í…Œì´ë„ˆ ì‚­ì œ
docker compose down

# ì»¨í…Œì´ë„ˆ ì¤‘ë‹¨
docker compose stop

# ì»¨í…Œì´ë„ˆ ì‹œì‘
docker compose start

# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker copmose restart
```



## Docker ëª…ë ¹ì–´ ì •ë¦¬
```
docker ps
docker ps -a
```
- Docker ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ëª©ë¡ í™•ì¸
- Docker ëª¨ë“  ì»¨í…Œì´ë„ˆ ëª©ë¡ í™•ì¸

```
docker inspect <id or name>
```
- Docker ì»¨í…Œì´ë„ˆ ì •ë³´ í™•ì¸

```
docker rm <id or name>
```
- Docker ì»¨í…Œì´ë„ˆ ì œê±°

```
docker start <id or name>
```
- Docker ì»¨í…Œì´ë„ˆ ì‹œì‘

```
docker stop <id or name>
docker kill <id or name>
```
- Docker ì»¨í…Œì´ë„ˆ ì •ì§€
- Docker ì»¨í…Œì´ë„ˆ ê°•ì œì¢…ë£Œ

```
docker restart <id or name>
```
- Docker ì¬ì‹œì‘

```
docker exec -it <id or name> bash
```
- Docker ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ëª…ë ¹ ì‹¤í–‰

```
docker logs <id or name>
```
- Docker ë¡œê·¸ í™•ì¸

```
docker login
```
- Docker ë¡œê·¸ì¸ Docker Hub id,password ì…ë ¥

```
docker exec -it <id or name> /bin/bash
```
- `exec`ì—Â `-it`Â ì˜µì…˜ì„ ì“°ëŠ” ì´ìœ 
    - `-i`: í‘œì¤€ ì…ì¶œë ¥ STDINì„ ì—´ê² ë‹¤ëŠ” ì˜ë¯¸
    - `-t`: ê°€ìƒ TTY(Pseudo TTY)ë¥¼ í†µí•´ ì ‘ì†í•˜ê² ë‹¤ëŠ” ì˜ë¯¸
- Docker ì»¨í…Œì´ë„ˆ ì ‘ì†

```
docker pull username/repo-name:[:tag]
```
- Docker ì €ì¥ì†Œ ì´ë¯¸ì§€ pull

```
docker tag <ë¡œì»¬ ì´ë¯¸ì§€ëª…> username/repo-name:[:tag]
```
- ì´ë¯¸ì§€ íƒœê¹… (Docker Hubìš©)
- Docker Hubì—ëŠ” `username/repo-name[:tag]` í˜•ì‹ìœ¼ë¡œ í‘¸ì‹œí•´ì•¼ í•˜ë¯€ë¡œ íƒœê¹…ì´ í•„ìš”

```
docker push username/repo-name:[:tag]
```
- Docker Hubë¡œ ì´ë¯¸ì§€ í‘¸ì‹œ

```
docker rmi username/repo-name:[:tag]
```
- í‘¸ì‹œí•œ í›„ ë¡œì»¬ì—ì„œ ì´ë¯¸ì§€ ì‚­ì œ

## ğŸ“‘ Reference

---

- [ì´ë¯¸ì§€ ì¶œì € Freepik \| ì˜¬ì¸ì› AI í¬ë¦¬ì—ì´í‹°ë¸Œ íˆ´](https://kr.freepik.com/)

---

